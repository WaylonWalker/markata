#
#  __  __            _         _         _                  _
# |  \/  | __ _ _ __| | ____ _| |_ __ _ | |_ ___  _ __ ___ | |
# | |\/| |/ _` | '__| |/ / _` | __/ _` || __/ _ \| '_ ` _ \| |
# | |  | | (_| | |  |   < (_| | || (_| || || (_) | | | | | | |
# |_|  |_|\__,_|_|  |_|\_\__,_|\__\__,_(_)__\___/|_| |_| |_|_|
#
#                                                  markata.dev

[markata.nav]
'markata'='/'
'GitHub'='https://github.com/WaylonWalker/markata'

[markata]
# bump site version to bust GitHub actions cache
site_version = 13

## choose your markdown backend
# markdown_backend='markdown'
# markdown_backend='markdown2'
markdown_backend='markdown-it-py'

# 2 weeks in seconds
default_cache_expire = 1209600
# subroute = "docs"

## Markata Setup
glob_patterns = "docs/**/*.md,CHANGELOG.md"
output_dir = "markout"
assets_dir = "static"
hooks = [
   "markata.plugins.publish_source",
# "markata.plugins.subroute",
   "markata.plugins.docs",
   # "markata.plugins.prevnext",
   "markata.plugins.service_worker",
   "default",
   ]
disabled_hooks = [
# "markata.plugins.covers",
# 'markata.plugins.flat_slug',
# 'markata.plugins.seo',
'markata.plugins.heading_link',
'markata.plugins.manifest',
# 'markata.plugins.rss'
]

## Site Config
url = "https://markata.dev"
title = "Markata's Docs"
description = "Documentation for using the Markata static site generator"
rss_description = "Markata docs"
author_name = "Waylon Walker"
author_email = "waylon@waylonwalaker.com"
icon = "favicon.ico"
lang = "en"
# post_template = "pages/templates/post_template.html"
repo_url = "https://github.com/waylonwalker/markata"
repo_branch = "main"
theme_color = "#322D39"
background_color = "#B73CF6"
start_url = "/"
site_name = "Markata"
short_name = "ww"
display = "minimal-ui"
twitter_card = "summary_large_image"
twitter_creator = "@_waylonwalker"
twitter_site = "@_waylonwalker"

# markdown_it flavor
[markata.markdown_it_py]
config='gfm-like'
# markdown_it built-in plugins
enable = [ "table" ]
disable = [ "image" ]

# markdown_it built-in plugin options
[markata.markdown_it_py.options_update]
linkify = true
html = true
typographer = true
highlight = 'markata.plugins.md_it_highlight_code:highlight_code'

# add custom markdown_it plugins
[[markata.markdown_it_py.plugins]]
plugin = "mdit_py_plugins.admon:admon_plugin"

[[markata.markdown_it_py.plugins]]
plugin = "mdit_py_plugins.admon:admon_plugin"

[[markata.markdown_it_py.plugins]]
plugin = "mdit_py_plugins.attrs:attrs_plugin"
config = {spans = true}

[[markata.markdown_it_py.plugins]]
plugin = "mdit_py_plugins.attrs:attrs_block_plugin"

[[markata.markdown_it_py.plugins]]
plugin = "markata.plugins.mdit_details:details_plugin"

[[markata.markdown_it_py.plugins]]
plugin = "mdit_py_plugins.anchors:anchors_plugin"

[markata.markdown_it_py.plugins.config]
permalink = true
permalinkSymbol = '<svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg>'

[[markata.markdown_it_py.plugins]]
plugin = "markata.plugins.md_it_wikilinks:wikilinks_plugin"
config = {markata = "markata"}

# markata feeds
# creating pages of posts
[markata.feeds_config]

## feed template
# [markata.feeds.<slug>]
# title="Project Gallery"
## python eval to True adds post to the feed
# filter="'project-gallery' in path"
## the key to sort on
# sort='title'
## the template for each post to use when added to the page
# card_template="""
# """

[[markata.feeds]]
slug='project-gallery'
title="Project Gallery"
filter="'project-gallery' in str(path)"
sort='title'
card_template="""
<li class='post' style='background:rgba(255, 255, 255, .05); border:1px solid rgba(255, 255, 255, .2); padding:1rem; margin: 2rem auto;' >
<a href='{{ href }}'><h2>{{ title }}</h2></a>
<ul style='display: flex; list-style-type: None;'>
<li><a href='{{ codeUrl }}'>Source Code</a></li>
<li><a href='{{ url }}'>Public Site</a></li>

</ul>
{{ article_html }}
</li>
"""

[[markata.feeds]]
slug='docs'
title="Documentation"
filter='"markata" not in slug and "tests" not in slug and "404" not in slug'
sort='slug'
card_template="<li class='post'><a href='{{ href }}'>{{ title }}<p style='color: white; text-decoration: none;'>{{ description }}</p></a> </li>"

[[markata.feeds]]
slug='all'
title="All Markata Modules"
filter="True"
card_template="""
<li class='post' style='background:rgba(255, 255, 255, .05); border:1px solid rgba(255, 255, 255, .2); padding:1rem; margin: 2rem auto;' >
<a href='{{ href }}'>
    <a href='{{ href }}'>{{ title }}</a>
    <p>
        {{ article_html[:article_html.find('</p>')]  }}
    </p>
</a>
</li>
"""

[[markata.feeds]]
slug='core-modules'
title="Markata Core Modules"
filter="'plugin' not in slug and 'test' not in slug and title.endswith('.py')"
card_template="""
<li class='post' style='background:rgba(255, 255, 255, .05); border:1px solid rgba(255, 255, 255, .2); padding:1rem; margin: 2rem auto;' >
<a href='{{ href }}'>
    <a href='{{ href }}'>{{ title }}</a>
    <p>
        {{ article_html[:article_html.find('</p>')]  }}
    </p>
</a>
</li>
"""

[[markata.feeds]]
slug='plugins'
title="Markata Plugins"
filter="'plugin' in slug and 'test' not in slug"
card_template="""
<li class='post' style='background:rgba(255, 255, 255, .05); border:1px solid rgba(255, 255, 255, .2); padding:1rem; margin: 2rem auto;' >
<a href='{{ href }}'>
    <a href='/{{ href }}/'>{{ title }}</a>
    <p>
        {{ article_html[:article_html.find('</p>')]  }}
    </p>
</a>
</li>
"""

[markata.jinja_md]
ignore=[
'jinja_md.md',
'post_template.md',
'publish_html.md',
'CHANGELOG.md',
'feeds.md',
]

[[markata.head.meta]]
name = "og:author_email"
content = "waylon@waylonwalker.com"

[markata.tui]
new_cmd=['tmux', 'popup', 'markata', 'new', 'post']

[[markata.tui.keymap]]
name='new'
key='n'

[markata.summary]
grid_attr = ['tags', 'series']

[[markata.summary.filter_count]]
name='drafts'
filter="published == 'False'"
color='red'

[[markata.summary.filter_count]]
name='articles'
color='dark_orange'

[[markata.summary.filter_count]]
name='py_modules'
filter='"plugin" not in slug and "docs" not in str(path)'
color="yellow1"

[markata.summary.filter_count.published]
filter="published == 'True'"
color='green1'

[markata.summary.filter_count.plugins]
filter='"plugin" in slug and "docs" not in str(path)'
color="blue"

[markata.summary.filter_count.docs]
filter="'docs' in str(path)"
color='purple'

[markata.post_model]
include = ['date', 'description', 'published', 'slug', 'title', 'content', 'html']
repr_include = ['date', 'description', 'published', 'slug', 'title', 'output_html']

[markata.render_markdown]
backend='markdown-it-py'

# [markata.markdown_it_py]
# config='gfm-like'
# # markdown_it built-in plugins
# enable = [ "table" ]
# disable = [ "image" ]

# # markdown_it built-in plugin options
# [markata.markdown_it_py.options_update]
# linkify = true
# html = true
# typographer = true
# highlight = 'markata.plugins.md_it_highlight_code:highlight_code'

# add custom markdown_it plugins
[[markata.render_markdown.extensions]]
plugin = "mdit_py_plugins.admon:admon_plugin"

[[markata.render_markdown.extensions]]
plugin = "mdit_py_plugins.admon:admon_plugin"

[[markata.render_markdown.extensions]]
plugin = "mdit_py_plugins.attrs:attrs_plugin"
config = {spans = true}

[[markata.render_markdown.extensions]]
plugin = "mdit_py_plugins.attrs:attrs_block_plugin"

[[markata.render_markdown.extensions]]
plugin = "markata.plugins.mdit_details:details_plugin"

[[markata.render_markdown.extensions]]
plugin = "mdit_py_plugins.anchors:anchors_plugin"

[markata.render_markdown.extensions.config]
permalink = true
permalinkSymbol = '<svg class="heading-permalink" aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewBox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z"></path></svg>'

[[markata.render_markdown.extensions]]
plugin = "markata.plugins.md_it_wikilinks:wikilinks_plugin"
config = {markata = "markata"}

[markata.glob]
glob_patterns = "docs/**/*.md,CHANGELOG.md"
use_gitignore = true
